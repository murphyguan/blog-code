{"remainingRequest":"E:\\JAVA\\blog\\blog-code\\web\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JAVA\\blog\\blog-code\\web\\blog\\src\\components\\Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JAVA\\blog\\blog-code\\web\\blog\\src\\components\\Comment.vue","mtime":1713440622000},{"path":"E:\\JAVA\\blog\\blog-code\\web\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1728701076490},{"path":"E:\\JAVA\\blog\\blog-code\\web\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1728701077185},{"path":"E:\\JAVA\\blog\\blog-code\\web\\blog\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1728701077859},{"path":"E:\\JAVA\\blog\\blog-code\\web\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1728701076490},{"path":"E:\\JAVA\\blog\\blog-code\\web\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1728701077734}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBSZXBseSBmcm9tICIuL1JlcGx5IjsKaW1wb3J0IFBhZ2luZyBmcm9tICIuL1BhZ2luZyI7CmltcG9ydCBFbW9qaSBmcm9tICIuL0Vtb2ppIjsKaW1wb3J0IEVtb2ppTGlzdCBmcm9tICIuLi9hc3NldHMvanMvZW1vamkiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgUmVwbHksCiAgICBFbW9qaSwKICAgIFBhZ2luZwogIH0sCiAgcHJvcHM6IHsKICAgIGNvbW1lbnRMaXN0OiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9LAogICAgY291bnQ6IHsKICAgICAgdHlwZTogTnVtYmVyCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHJlRnJlc2g6IHRydWUsCiAgICAgIGNvbW1lbnRDb250ZW50OiAiIiwKICAgICAgY2hvb3NlRW1vamk6IGZhbHNlLAogICAgICBjdXJyZW50OiAxCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVwbHlDb21tZW50KGluZGV4LCBpdGVtKSB7CiAgICAgIHRoaXMuJHJlZnMucmVwbHkuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpdGVtLiRlbC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICB9KTsKICAgICAgLy/kvKDlgLznu5nlm57lpI3moYYKICAgICAgdGhpcy4kcmVmcy5yZXBseVtpbmRleF0uY29tbWVudENvbnRlbnQgPSAiIjsKICAgICAgdGhpcy4kcmVmcy5yZXBseVtpbmRleF0ubmlja25hbWUgPSBpdGVtLm5pY2tuYW1lOwogICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS5yZXBseVVzZXJJZCA9IGl0ZW0udXNlcklkOwogICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS5wYXJlbnRJZCA9IHRoaXMuY29tbWVudExpc3RbaW5kZXhdLmlkOwogICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS5jaG9vc2VFbW9qaSA9IGZhbHNlOwogICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS5pbmRleCA9IGluZGV4OwogICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS4kZWwuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICB9LAogICAgYWRkRW1vamkoa2V5KSB7CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgKz0ga2V5OwogICAgfSwKICAgIGNoZWNrUmVwbGllcyhpbmRleCwgaXRlbSkgewogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgiL2FwaS9jb21tZW50cy8iICsgaXRlbS5pZCArICIvcmVwbGllcyIsIHsKICAgICAgICAgIHBhcmFtczogeyBjdXJyZW50OiAxLCBzaXplOiA1IH0KICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5jaGVja1tpbmRleF0uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgIGl0ZW0ucmVwbHlEVE9MaXN0ID0gZGF0YS5kYXRhOwogICAgICAgICAgLy/otoXov4cx6aG15omN5pi+56S65YiG6aG1CiAgICAgICAgICBpZiAoTWF0aC5jZWlsKGl0ZW0ucmVwbHlDb3VudCAvIDUpID4gMSkgewogICAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2luZ1tpbmRleF0uc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VSZXBseUN1cnJlbnQoY3VycmVudCwgaW5kZXgsIGNvbW1lbnRJZCkgewogICAgICAvL+afpeeci+S4i+S4gOmhteWbnuWkjQogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgiL2FwaS9jb21tZW50cy8iICsgY29tbWVudElkICsgIi9yZXBsaWVzIiwgewogICAgICAgICAgcGFyYW1zOiB7IGN1cnJlbnQ6IGN1cnJlbnQsIHNpemU6IDUgfQogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICB0aGlzLmNvbW1lbnRMaXN0W2luZGV4XS5yZXBseURUT0xpc3QgPSBkYXRhLmRhdGE7CiAgICAgICAgfSk7CiAgICB9LAogICAgbGlzdENvbW1lbnRzKCkgewogICAgICAvL+afpeeci+S4i+S4gOmhteivhOiuugogICAgICB0aGlzLmN1cnJlbnQrKzsKICAgICAgY29uc3QgcGF0aCA9IHRoaXMuJHJvdXRlLnBhdGg7CiAgICAgIGNvbnN0IGFyciA9IHBhdGguc3BsaXQoIi8iKTsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5nZXQoIi9hcGkvY29tbWVudHMiLCB7CiAgICAgICAgICBwYXJhbXM6IHsgY3VycmVudDogdGhpcy5jdXJyZW50LCBhcnRpY2xlSWQ6IGFyclsyXSB9CiAgICAgICAgfSkKICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgIHRoaXMuY29tbWVudExpc3QucHVzaCguLi5kYXRhLmRhdGEucmVjb3JkTGlzdCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaW5zZXJ0Q29tbWVudCgpIHsKICAgICAgLy/liKTmlq3nmbvlvZUKICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS51c2VySWQpIHsKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbkZsYWcgPSB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAvL+WIpOepugogICAgICBpZiAodGhpcy5jb21tZW50Q29udGVudC50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiR0b2FzdCh7IHR5cGU6ICJlcnJvciIsIG1lc3NhZ2U6ICLor4TorrrkuI3og73kuLrnqboiIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAvL+ino+aekOihqOaDhQogICAgICB2YXIgcmVnID0gL1xbLis/XF0vZzsKICAgICAgdGhpcy5jb21tZW50Q29udGVudCA9IHRoaXMuY29tbWVudENvbnRlbnQucmVwbGFjZShyZWcsIGZ1bmN0aW9uKHN0cikgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICAiPGltZyBzcmM9ICciICsKICAgICAgICAgIEVtb2ppTGlzdFtzdHJdICsKICAgICAgICAgICInIHdpZHRoPScyMidoZWlnaHQ9JzIwJyBzdHlsZT0ncGFkZGluZzogMCAxcHgnLz4iCiAgICAgICAgKTsKICAgICAgfSk7CiAgICAgIC8v5Y+R6YCB6K+35rGCCiAgICAgIGNvbnN0IHBhdGggPSB0aGlzLiRyb3V0ZS5wYXRoOwogICAgICBjb25zdCBhcnIgPSBwYXRoLnNwbGl0KCIvIik7CiAgICAgIHZhciBjb21tZW50ID0gewogICAgICAgIGFydGljbGVJZDogYXJyWzJdLAogICAgICAgIGNvbW1lbnRDb250ZW50OiB0aGlzLmNvbW1lbnRDb250ZW50CiAgICAgIH07CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgPSAiIjsKICAgICAgdGhpcy5heGlvcy5wb3N0KCIvYXBpL2NvbW1lbnRzIiwgY29tbWVudCkudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICBpZiAoZGF0YS5mbGFnKSB7CiAgICAgICAgICAvL+afpeivouacgOaWsOivhOiuugogICAgICAgICAgdGhpcy4kZW1pdCgicmVsb2FkQ29tbWVudCIpOwogICAgICAgICAgY29uc3QgaXNSZXZpZXcgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ibG9nSW5mby53ZWJzaXRlQ29uZmlnCiAgICAgICAgICAgIC5pc0NvbW1lbnRSZXZpZXc7CiAgICAgICAgICBpZiAoaXNSZXZpZXcpIHsKICAgICAgICAgICAgdGhpcy4kdG9hc3QoeyB0eXBlOiAid2Fybm5pbmciLCBtZXNzYWdlOiAi6K+E6K665oiQ5Yqf77yM5q2j5Zyo5a6h5qC45LitIiB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHRvYXN0KHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi6K+E6K665oiQ5YqfIiB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdG9hc3QoeyB0eXBlOiAiZXJyb3IiLCBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsaWtlKGNvbW1lbnQpIHsKICAgICAgLy8g5Yik5pat55m75b2VCiAgICAgIGlmICghdGhpcy4kc3RvcmUuc3RhdGUudXNlcklkKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9naW5GbGFnID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgLy8g5Y+R6YCB6K+35rGCCiAgICAgIHRoaXMuYXhpb3MKICAgICAgICAucG9zdCgiL2FwaS9jb21tZW50cy8iICsgY29tbWVudC5pZCArICIvbGlrZSIpCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICBpZiAoZGF0YS5mbGFnKSB7CiAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpueCuei1ngogICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuY29tbWVudExpa2VTZXQuaW5kZXhPZihjb21tZW50LmlkKSAhPSAtMSkgewogICAgICAgICAgICAgIHRoaXMuJHNldChjb21tZW50LCAibGlrZUNvdW50IiwgY29tbWVudC5saWtlQ291bnQgLSAxKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRzZXQoY29tbWVudCwgImxpa2VDb3VudCIsIGNvbW1lbnQubGlrZUNvdW50ICsgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJjb21tZW50TGlrZSIsIGNvbW1lbnQuaWQpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIHJlbG9hZFJlcGx5KGluZGV4KSB7CiAgICAgIHRoaXMuYXhpb3MKICAgICAgICAuZ2V0KCIvYXBpL2NvbW1lbnRzLyIgKyB0aGlzLmNvbW1lbnRMaXN0W2luZGV4XS5pZCArICIvcmVwbGllcyIsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBjdXJyZW50OiB0aGlzLiRyZWZzLnBhZ2VbaW5kZXhdLmN1cnJlbnQKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgICAgdGhpcy5jb21tZW50TGlzdFtpbmRleF0ucmVwbHlDb3VudCsrOwogICAgICAgICAgLy/lm57lpI3lpKfkuo415p2h5bGV56S65YiG6aG1CiAgICAgICAgICBpZiAodGhpcy5jb21tZW50TGlzdFtpbmRleF0ucmVwbHlDb3VudCA+IDUpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdpbmdbaW5kZXhdLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRyZWZzLmNoZWNrW2luZGV4XS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgdGhpcy4kcmVmcy5yZXBseVtpbmRleF0uJGVsLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICB0aGlzLmNvbW1lbnRMaXN0W2luZGV4XS5yZXBseURUT0xpc3QgPSBkYXRhLmRhdGE7CiAgICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNMaWtlKCkgewogICAgICByZXR1cm4gZnVuY3Rpb24oY29tbWVudElkKSB7CiAgICAgICAgdmFyIGNvbW1lbnRMaWtlU2V0ID0gdGhpcy4kc3RvcmUuc3RhdGUuY29tbWVudExpa2VTZXQ7CiAgICAgICAgcmV0dXJuIGNvbW1lbnRMaWtlU2V0LmluZGV4T2YoY29tbWVudElkKSAhPSAtMSA/ICJsaWtlLWFjdGl2ZSIgOiAibGlrZSI7CiAgICAgIH07CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY29tbWVudExpc3QoKSB7CiAgICAgIHRoaXMucmVGcmVzaCA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5yZUZyZXNoID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Comment.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"comment-title\"><i class=\"iconfont iconpinglunzu\" />评论</div>\n    <!-- 评论框 -->\n    <div class=\"comment-input-wrapper\">\n      <div style=\"display:flex\">\n        <v-avatar size=\"40\">\n          <img\n            v-if=\"this.$store.state.avatar\"\n            :src=\"this.$store.state.avatar\"\n          />\n          <img\n            v-else\n            :src=\"this.$store.state.blogInfo.websiteConfig.touristAvatar\"\n          />\n        </v-avatar>\n        <div style=\"width:100%\" class=\"ml-3\">\n          <div class=\"comment-input\">\n            <textarea\n              class=\"comment-textarea\"\n              v-model=\"commentContent\"\n              placeholder=\"留下点什么吧...\"\n              auto-grow\n              dense\n            />\n          </div>\n          <!-- 操作按钮 -->\n          <div class=\"emoji-container\">\n            <span\n              :class=\"chooseEmoji ? 'emoji-btn-active' : 'emoji-btn'\"\n              @click=\"chooseEmoji = !chooseEmoji\"\n            >\n              <i class=\"iconfont iconbiaoqing\" />\n            </span>\n            <button\n              @click=\"insertComment\"\n              class=\"upload-btn v-comment-btn\"\n              style=\"margin-left:auto\"\n            >\n              提交\n            </button>\n          </div>\n          <!-- 表情框 -->\n          <emoji @addEmoji=\"addEmoji\" :chooseEmoji=\"chooseEmoji\" />\n        </div>\n      </div>\n    </div>\n    <!-- 评论详情 -->\n    <div v-if=\"count > 0 && reFresh\">\n      <!-- 评论数量 -->\n      <div class=\"count\">{{ count }} 评论</div>\n      <!-- 评论列表 -->\n      <div\n        style=\"display:flex\"\n        class=\"pt-5\"\n        v-for=\"(item, index) of commentList\"\n        :key=\"item.id\"\n      >\n        <!-- 头像 -->\n        <v-avatar size=\"40\" class=\"comment-avatar\">\n          <img :src=\"item.avatar\" />\n        </v-avatar>\n        <div class=\"comment-meta\">\n          <!-- 用户名 -->\n          <div class=\"comment-user\">\n            <span v-if=\"!item.webSite\">{{ item.nickname }}</span>\n            <a v-else :href=\"item.webSite\" target=\"_blank\">\n              {{ item.nickname }}\n            </a>\n            <span class=\"blogger-tag\" v-if=\"item.userId == 1\">博主</span>\n          </div>\n          <!-- 信息 -->\n          <div class=\"comment-info\">\n            <!-- 楼层 -->\n            <span style=\"margin-right:10px\">{{ count - index }}楼</span>\n            <!-- 发表时间 -->\n            <span style=\"margin-right:10px\">{{ item.createTime | date }}</span>\n            <!-- 点赞 -->\n            <span\n              :class=\"isLike(item.id) + ' iconfont icondianzan'\"\n              @click=\"like(item)\"\n            />\n            <span v-show=\"item.likeCount > 0\"> {{ item.likeCount }}</span>\n            <!-- 回复 -->\n            <span class=\"reply-btn\" @click=\"replyComment(index, item)\">\n              回复\n            </span>\n          </div>\n          <!-- 评论内容 -->\n          <p v-html=\"item.commentContent\" class=\"comment-content\"></p>\n          <!-- 回复人 -->\n          <div\n            style=\"display:flex\"\n            v-for=\"reply of item.replyDTOList\"\n            :key=\"reply.id\"\n          >\n            <!-- 头像 -->\n            <v-avatar size=\"36\" class=\"comment-avatar\">\n              <img :src=\"reply.avatar\" />\n            </v-avatar>\n            <div class=\"reply-meta\">\n              <!-- 用户名 -->\n              <div class=\"comment-user\">\n                <span v-if=\"!reply.webSite\">{{ reply.nickname }}</span>\n                <a v-else :href=\"reply.webSite\" target=\"_blank\">\n                  {{ reply.nickname }}\n                </a>\n                <span class=\"blogger-tag\" v-if=\"reply.userId == 1\">博主</span>\n              </div>\n              <!-- 信息 -->\n              <div class=\"comment-info\">\n                <!-- 发表时间 -->\n                <span style=\"margin-right:10px\">\n                  {{ reply.createTime | date }}\n                </span>\n                <!-- 点赞 -->\n                <span\n                  :class=\"isLike(reply.id) + ' iconfont icondianzan'\"\n                  @click=\"like(reply)\"\n                />\n                <span v-show=\"reply.likeCount > 0\"> {{ reply.likeCount }}</span>\n                <!-- 回复 -->\n                <span class=\"reply-btn\" @click=\"replyComment(index, reply)\">\n                  回复\n                </span>\n              </div>\n              <!-- 回复内容 -->\n              <p class=\"comment-content\">\n                <!-- 回复用户名 -->\n                <template v-if=\"reply.replyUserId != item.userId\">\n                  <span v-if=\"!reply.replyWebSite\" class=\"ml-1\">\n                    @{{ reply.replyNickname }}\n                  </span>\n                  <a\n                    v-else\n                    :href=\"reply.replyWebSite\"\n                    target=\"_blank\"\n                    class=\"comment-nickname ml-1\"\n                  >\n                    @{{ reply.replyNickname }}\n                  </a>\n                  ，\n                </template>\n                <span v-html=\"reply.commentContent\" />\n              </p>\n            </div>\n          </div>\n          <!-- 回复数量 -->\n          <div\n            class=\"mb-3\"\n            style=\"font-size:0.75rem;color:#6d757a\"\n            v-show=\"item.replyCount > 3\"\n            ref=\"check\"\n          >\n            共\n            <b>{{ item.replyCount }}</b>\n            条回复，\n            <span\n              style=\"color:#00a1d6;cursor:pointer\"\n              @click=\"checkReplies(index, item)\"\n            >\n              点击查看\n            </span>\n          </div>\n          <!-- 回复分页 -->\n          <div\n            class=\"mb-3\"\n            style=\"font-size:0.75rem;color:#222;display:none\"\n            ref=\"paging\"\n          >\n            <span style=\"padding-right:10px\">\n              共{{ Math.ceil(item.replyCount / 5) }}页\n            </span>\n            <paging\n              ref=\"page\"\n              :totalPage=\"Math.ceil(item.replyCount / 5)\"\n              :index=\"index\"\n              :commentId=\"item.id\"\n              @changeReplyCurrent=\"changeReplyCurrent\"\n            />\n          </div>\n          <!-- 回复框 -->\n          <Reply ref=\"reply\" @reloadReply=\"reloadReply\" />\n        </div>\n      </div>\n      <!-- 加载按钮 -->\n      <div class=\"load-wrapper\">\n        <v-btn outlined v-if=\"count > commentList.length\" @click=\"listComments\">\n          加载更多...\n        </v-btn>\n      </div>\n    </div>\n    <!-- 没有评论提示 -->\n    <div v-else style=\"padding:1.25rem;text-align:center\">\n      来发评论吧~\n    </div>\n  </div>\n</template>\n\n<script>\nimport Reply from \"./Reply\";\nimport Paging from \"./Paging\";\nimport Emoji from \"./Emoji\";\nimport EmojiList from \"../assets/js/emoji\";\nexport default {\n  components: {\n    Reply,\n    Emoji,\n    Paging\n  },\n  props: {\n    commentList: {\n      type: Array\n    },\n    count: {\n      type: Number\n    }\n  },\n  data: function() {\n    return {\n      reFresh: true,\n      commentContent: \"\",\n      chooseEmoji: false,\n      current: 1\n    };\n  },\n  methods: {\n    replyComment(index, item) {\n      this.$refs.reply.forEach(item => {\n        item.$el.style.display = \"none\";\n      });\n      //传值给回复框\n      this.$refs.reply[index].commentContent = \"\";\n      this.$refs.reply[index].nickname = item.nickname;\n      this.$refs.reply[index].replyUserId = item.userId;\n      this.$refs.reply[index].parentId = this.commentList[index].id;\n      this.$refs.reply[index].chooseEmoji = false;\n      this.$refs.reply[index].index = index;\n      this.$refs.reply[index].$el.style.display = \"block\";\n    },\n    addEmoji(key) {\n      this.commentContent += key;\n    },\n    checkReplies(index, item) {\n      this.axios\n        .get(\"/api/comments/\" + item.id + \"/replies\", {\n          params: { current: 1, size: 5 }\n        })\n        .then(({ data }) => {\n          this.$refs.check[index].style.display = \"none\";\n          item.replyDTOList = data.data;\n          //超过1页才显示分页\n          if (Math.ceil(item.replyCount / 5) > 1) {\n            this.$refs.paging[index].style.display = \"flex\";\n          }\n        });\n    },\n    changeReplyCurrent(current, index, commentId) {\n      //查看下一页回复\n      this.axios\n        .get(\"/api/comments/\" + commentId + \"/replies\", {\n          params: { current: current, size: 5 }\n        })\n        .then(({ data }) => {\n          this.commentList[index].replyDTOList = data.data;\n        });\n    },\n    listComments() {\n      //查看下一页评论\n      this.current++;\n      const path = this.$route.path;\n      const arr = path.split(\"/\");\n      this.axios\n        .get(\"/api/comments\", {\n          params: { current: this.current, articleId: arr[2] }\n        })\n        .then(({ data }) => {\n          this.commentList.push(...data.data.recordList);\n        });\n    },\n    insertComment() {\n      //判断登录\n      if (!this.$store.state.userId) {\n        this.$store.state.loginFlag = true;\n        return false;\n      }\n      //判空\n      if (this.commentContent.trim() == \"\") {\n        this.$toast({ type: \"error\", message: \"评论不能为空\" });\n        return false;\n      }\n      //解析表情\n      var reg = /\\[.+?\\]/g;\n      this.commentContent = this.commentContent.replace(reg, function(str) {\n        return (\n          \"<img src= '\" +\n          EmojiList[str] +\n          \"' width='22'height='20' style='padding: 0 1px'/>\"\n        );\n      });\n      //发送请求\n      const path = this.$route.path;\n      const arr = path.split(\"/\");\n      var comment = {\n        articleId: arr[2],\n        commentContent: this.commentContent\n      };\n      this.commentContent = \"\";\n      this.axios.post(\"/api/comments\", comment).then(({ data }) => {\n        if (data.flag) {\n          //查询最新评论\n          this.$emit(\"reloadComment\");\n          const isReview = this.$store.state.blogInfo.websiteConfig\n            .isCommentReview;\n          if (isReview) {\n            this.$toast({ type: \"warnning\", message: \"评论成功，正在审核中\" });\n          } else {\n            this.$toast({ type: \"success\", message: \"评论成功\" });\n          }\n        } else {\n          this.$toast({ type: \"error\", message: data.message });\n        }\n      });\n    },\n    like(comment) {\n      // 判断登录\n      if (!this.$store.state.userId) {\n        this.$store.state.loginFlag = true;\n        return false;\n      }\n      // 发送请求\n      this.axios\n        .post(\"/api/comments/\" + comment.id + \"/like\")\n        .then(({ data }) => {\n          if (data.flag) {\n            // 判断是否点赞\n            if (this.$store.state.commentLikeSet.indexOf(comment.id) != -1) {\n              this.$set(comment, \"likeCount\", comment.likeCount - 1);\n            } else {\n              this.$set(comment, \"likeCount\", comment.likeCount + 1);\n            }\n            this.$store.commit(\"commentLike\", comment.id);\n          }\n        });\n    },\n    reloadReply(index) {\n      this.axios\n        .get(\"/api/comments/\" + this.commentList[index].id + \"/replies\", {\n          params: {\n            current: this.$refs.page[index].current\n          }\n        })\n        .then(({ data }) => {\n          this.commentList[index].replyCount++;\n          //回复大于5条展示分页\n          if (this.commentList[index].replyCount > 5) {\n            this.$refs.paging[index].style.display = \"flex\";\n          }\n          this.$refs.check[index].style.display = \"none\";\n          this.$refs.reply[index].$el.style.display = \"none\";\n          this.commentList[index].replyDTOList = data.data;\n        });\n    }\n  },\n  computed: {\n    isLike() {\n      return function(commentId) {\n        var commentLikeSet = this.$store.state.commentLikeSet;\n        return commentLikeSet.indexOf(commentId) != -1 ? \"like-active\" : \"like\";\n      };\n    }\n  },\n  watch: {\n    commentList() {\n      this.reFresh = false;\n      this.$nextTick(() => {\n        this.reFresh = true;\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\np {\n  margin-bottom: 1.25rem !important;\n}\n.blogger-tag {\n  background: #ffa51e;\n  font-size: 12px;\n  display: inline-block;\n  border-radius: 2px;\n  color: #fff;\n  padding: 0 5px;\n  margin-left: 6px;\n}\n.comment-title {\n  display: flex;\n  align-items: center;\n  font-size: 1.25rem;\n  font-weight: bold;\n  line-height: 40px;\n  margin-bottom: 10px;\n}\n.comment-title i {\n  font-size: 1.5rem;\n  margin-right: 5px;\n}\n.comment-input-wrapper {\n  border: 1px solid #90939950;\n  border-radius: 4px;\n  padding: 10px;\n  margin: 0 0 10px;\n}\n.count {\n  padding: 5px;\n  line-height: 1.75;\n  font-size: 1.25rem;\n  font-weight: bold;\n}\n.comment-meta {\n  margin-left: 0.8rem;\n  width: 100%;\n  border-bottom: 1px dashed #f5f5f5;\n}\n.reply-meta {\n  margin-left: 0.8rem;\n  width: 100%;\n}\n.comment-user {\n  font-size: 14px;\n  line-height: 1.75;\n}\n.comment-user a {\n  color: #1abc9c !important;\n  font-weight: 500;\n  transition: 0.3s all;\n}\n.comment-nickname {\n  text-decoration: none;\n  color: #1abc9c !important;\n  font-weight: 500;\n}\n.comment-info {\n  line-height: 1.75;\n  font-size: 0.75rem;\n  color: #b3b3b3;\n}\n.reply-btn {\n  cursor: pointer;\n  float: right;\n  color: #ef2f11;\n}\n.comment-content {\n  font-size: 0.875rem;\n  line-height: 1.75;\n  padding-top: 0.625rem;\n}\n.comment-avatar {\n  transition: all 0.5s;\n}\n.comment-avatar:hover {\n  transform: rotate(360deg);\n}\n.like {\n  cursor: pointer;\n  font-size: 0.875rem;\n}\n.like:hover {\n  color: #eb5055;\n}\n.like-active {\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: #eb5055;\n}\n.load-wrapper {\n  margin-top: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.load-wrapper button {\n  background-color: #49b1f5;\n  color: #fff;\n}\n</style>\n"]}]}